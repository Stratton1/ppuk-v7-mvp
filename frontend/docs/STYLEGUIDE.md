# Frontend Styleguide (Phase 6)\n\nPractical rules for writing and reviewing PPUK v7 frontend code.\n\n## TypeScript & Structure\n- Strict TypeScript; no `any`. Define props interfaces/types near components.\n- Prefer server components; client components only for forms, tabs, dialogs, React Query widgets.\n- Keep files small and focused. Server actions live under `frontend/actions/*`.\n- Imports: use `@/` aliases; avoid relative `../../..` chains when possible.\n\n## Naming & Domain Language\n- Follow domain terms exactly: Property Passport, Property, Stakeholder, Task, Event, Flag, Document, Media, Watchlist, Completion Score.\n- File names: kebab-case; components: PascalCase; variables: camelCase; constants: UPPER_SNAKE_CASE.\n\n## UI & Styling\n- Tailwind + shadcn UI only; no inline styles. Reuse tokens in `styles/tokens.ts`.\n- Spacing/radii/typography: match tokens + design system doc. Cards use consistent padding and shadows.\n- Layout primitives: `AppSection`, `AppShell*`, `PageHeader`, `AppShellSidebar`. Prefer these over bespoke wrappers.\n- Forms: labeled inputs, inline validation, helpful error copy.\n\n## Data Fetching & Mutations\n- Reads: server components or React Query for interactive widgets. Avoid client-side Supabase writes.\n- Mutations: server actions with Zod validation + auth + permission + `revalidatePath`.\n- Never bypass RLS. Do not change schema or RPCs from the frontend.\n\n## Testing & Quality\n- Add `data-testid` for interactive elements and empty/error states.\n- Unit tests in `tests/unit`; integration/RLS in `tests/integration` and `tests/rls` (guarded by env). Playwright E2E uses `/api/test/reset`.\n- Prefer deterministic UI states (loading skeletons, empty placeholders) to stabilize tests.\n\n## Accessibility\n- Use semantic elements, aria labels where needed, and focusable controls from shadcn.\n- Ensure color contrast follows the design system; avoid text-only indicators for status.\n\n## Error/Empty/Loading\n- Loading: skeletons or minimal placeholders; avoid layout shift.\n- Empty: concise message + optional CTA; keep `data-testid` stable.\n- Error: user-friendly message; log technical details to console only when necessary.\n\n## Mock Mode\n- Client-only toggle `NEXT_PUBLIC_USE_MOCKS=true`. Keep UI resilient when backend RPCs are missingâ€”prefer graceful fallbacks and empty states.\n*** End Patch
